<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div class="calulator">
        <div class="calultor__input"></div>
        <div class="calulatou__buttons">
            <div class="first_line">
                <button id="AC">AC</button>
                <button class="count_sign" value="÷">÷</button>
            </div>
            <button class="num_btn" value="7">7</button>
            <button class="num_btn" value="8">8</button>
            <button class="num_btn" value="9">9</button>
            <button class="count_sign" value="*">x</button>
            <button class="num_btn" value="4">4</button>
            <button class="num_btn" value="5">5</button>
            <button class="num_btn" value="6">6</button>
            <button class="count_sign" value="-">-</button>
            <button class="num_btn" value="1">1</button>
            <button class="num_btn" value="2">2</button>
            <button class="num_btn" value="3">3</button>
            <button class="count_sign" value="+">+</button>
            <button class="num_btn" value="0">0</button>
            <button class="num_btn" value=".">.</button>
            <button><a href="#"><img src="https://www.joyofdata.de/blog/wp-content/uploads/2015/05/github.png"></a></button>
            <button id="equal">=</button>
        </div>
    </div>

    <style>
        .calulator{
            width: 450px;
            border: 4px solid rgba(131, 129, 125, 0.568);
            margin: 40px auto;
            padding: 10px;
            border-radius: 8px;
        }
        .calultor__input{
            width: 450px;
            height: 56px;
            border: rgba(128, 128, 128, 0.253) 1px solid;
            margin-bottom:10px;
            font-size:48px;
            text-align:right;
        }
        .calulatou__buttons{
            display: flex;
            flex-flow: wrap;
            justify-content: space-between;
        }
        .first_line{
            display: flex;
            justify-content: space-between;
            width: 100%;
        }
        #equal{
            background: orange;
        }
        button{
            border:1px solid rgba(219, 200, 200, 0.664);
            width: 94px;
            height: 40px;
            margin:1px;
            padding: 1px 6px;
            background: white;
            transition: transform 0.2s;
            border-radius: 8px;
        }
        button:active{
            transform: scale(1.1)
        }
    </style>

    <script type="text/javascript">
        let first_num = '';
        let sec_num = '';
        let count_sign = '';
        let screen = '';
        //設定 querySelector 的簡稱
        let q = function (n) {
            return document.querySelector(n)
        };
        //監聽數字按鍵
        document.querySelectorAll('.num_btn').forEach(function (el) {
            el.addEventListener('click', function () {
                screen += this.value;
                if (screen.length > 15) {
                    alert('超過太多我算不出來');
                    screen = '';
                }
                if (first_num !== '' && sec_num !== '') {
                    sec_num = '';
                    screen = '';
                    screen += this.value;
                }
                q('.calultor__input').textContent = screen;
            })
        })
        //AC
        q('#AC').addEventListener('click', function () {
            screen = '';
            first_num = '';
            sec_num = '';
            count_sign = '';
            q('.calultor__input').textContent = '';
        })
        //監聽運算鍵
        document.querySelectorAll('.count_sign').forEach(function (el) {
            el.addEventListener('click', function () {
                count_sign = this.value;
                count();
            })
        })
        //監聽等於
        q('#equal').addEventListener('click', function () {
            equal();
        })
        //運算
        function count() {
            if (first_num === '') {
                first_num = screen;
                q('.calultor__input').textContent = '';
                screen = '';
            }
            else if (first_num !== '') {
                equal();
            }
        }
        function equal() {
            sec_num = screen;
            switch (count_sign) {
                case '+':
                    q('.calultor__input').textContent = parseFloat(first_num) + parseFloat(sec_num);
                    screen = parseFloat(first_num) + parseFloat(sec_num);
                    first_num = screen;
                    break;
                case '-':
                    q('.calultor__input').textContent = parseFloat(first_num) - parseFloat(sec_num);
                    screen = parseFloat(first_num) - parseFloat(sec_num);
                    first_num = screen;
                    break;
                case '*':
                    q('.calultor__input').textContent = parseFloat(first_num) * parseFloat(sec_num);
                    screen = parseFloat(first_num) * parseFloat(sec_num);
                    first_num = screen;
                    break;

                    break;
                case '÷':
                    q('.calultor__input').textContent = parseFloat(first_num) / parseFloat(sec_num);
                    screen = parseFloat(first_num) / parseFloat(sec_num);
                    first_num = screen;
                    break;
            }
        }

    </script>
</body>

</html>